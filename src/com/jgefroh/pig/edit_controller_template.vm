#set ($modelName = $model.name.toString())
#set ($moduleName = ${model.packageName.toString().substring(0, ${model.packageName.lastIndexOf(".")})} + "." + ${modelName} + "Module")
#set ($modelNamePlural = ${FormatUtil.pluralize(${modelName.toLowerCase()})})
/**
 * Autogenerated by PIG.
 * @author Joseph Gefroh
 */
(function () {
    function ${modelName}EditController (${FormatUtil.getDollarSign()}scope, ${FormatUtil.getDollarSign()}state, ${modelName}Service) {
        ${FormatUtil.getDollarSign()}scope.operations = {};
        initialize();
        function initialize() {
            if (!${FormatUtil.getDollarSign()}state.params.id) {
                ${FormatUtil.getDollarSign()}state.go('${modelName.toLowerCase()}_selection');
            }
            else if (${FormatUtil.getDollarSign()}state.params.id != 'new') {
                ${FormatUtil.getDollarSign()}scope.operations.isLoading = true;
                ${modelName}Service.get(${FormatUtil.getDollarSign()}state.params.id).then(function(${FormatUtil.camelCase(${modelName})}) {
                    ${FormatUtil.getDollarSign()}scope.operations.isLoading = false;
                    ${FormatUtil.getDollarSign()}scope.input = angular.copy(${FormatUtil.camelCase(${modelName})});
                }, function() {
                    ${FormatUtil.getDollarSign()}state.go('${modelName.toLowerCase()}_selection');
                });
            }

        }

        ${FormatUtil.getDollarSign()}scope.save = function(${FormatUtil.camelCase(${modelName})}) {
            ${FormatUtil.getDollarSign()}scope.operations.isSaving = true;
            ${modelName}Service.save(${FormatUtil.camelCase(${modelName})}).then(function() {
                ${FormatUtil.getDollarSign()}state.go('${modelName.toLowerCase()}_selection');
            });
        };

        ${FormatUtil.getDollarSign()}scope.cancel = function() {
            ${FormatUtil.getDollarSign()}state.go('${modelName.toLowerCase()}_selection');
        };
    }

    angular
        .module('${moduleName}')
        .controller('${modelName}EditController', ['${FormatUtil.getDollarSign()}scope', '${FormatUtil.getDollarSign()}state', '${modelName}Service', ${modelName}EditController]);
})();