#set ($modelName = $model.name.toString())
#set ($moduleName = ${model.packageName.toString().substring(0, ${model.packageName.lastIndexOf(".")})} + "." + ${modelName} + "Module")
#set ($modelNamePlural = ${FormatUtil.pluralize(${modelName.toLowerCase()})})
/**
 * Autogenerated by PIG.
 * @author Joseph Gefroh
 */
(function () {
    function ${modelName}SelectionController (${FormatUtil.getDollarSign()}scope, ${FormatUtil.getDollarSign()}state, ${FormatUtil.getDollarSign()}modal, ${modelName}Service) {
        ${FormatUtil.getDollarSign()}scope.operations = {};
        getAll();
        ${FormatUtil.getDollarSign()}scope.edit = function(${FormatUtil.camelCase(${modelName})}) {
            ${FormatUtil.getDollarSign()}state.go('${modelName.toLowerCase()}_edit', {id:${FormatUtil.camelCase(${modelName})}.id});
        };

        ${FormatUtil.getDollarSign()}scope.showRemove = function(${FormatUtil.camelCase(${modelName})}) {
            var modal = ${FormatUtil.getDollarSign()}modal.open(
                {
                    templateUrl: '../../common/ConfirmationPopupView.html',
                    controller: 'ConfirmationPopupController',
                    resolve: {
                        options: function() {
                            return {
                                header: 'Delete ${modelName}',
                                question: 'Are you sure you want to delete this ${modelName.toLowerCase()}?'
                            }
                        }
                    }
                }
            );
            modal.result.then(function() {
                remove(${FormatUtil.camelCase(${modelName})});
            }, function() {
            });
        };

        function remove(${FormatUtil.camelCase(${modelName})}) {
            ${modelName}Service.delete${modelName}(${FormatUtil.camelCase(${modelName})}.id).then(function() {
                removeFromArray(${FormatUtil.camelCase(${modelName})}, ${FormatUtil.getDollarSign()}scope.${FormatUtil.pluralize(${FormatUtil.camelCase(${modelName})})});
            });
        }

        function removeFromArray(object, array) {
            if (array.indexOf(object) != -1) {
                array.splice(array.indexOf(object), 1);
            }
        }

        ${FormatUtil.getDollarSign()}scope.create = function() {
            ${FormatUtil.getDollarSign()}state.go('${modelName.toLowerCase()}_edit', {id:'new'});
        };

        function getAll() {
            ${FormatUtil.getDollarSign()}scope.operations.isLoading = true;
            ${modelName}Service.getAll().then(function(${FormatUtil.pluralize(${FormatUtil.camelCase(${modelName})})}) {
                ${FormatUtil.getDollarSign()}scope.${FormatUtil.pluralize(${FormatUtil.camelCase(${modelName})})} = ${FormatUtil.pluralize(${FormatUtil.camelCase(${modelName})})};
                ${FormatUtil.getDollarSign()}scope.operations.isLoading = false;
            });
        }
    }

    angular
        .module('${moduleName}')
        .controller('${modelName}SelectionController', ['${FormatUtil.getDollarSign()}scope', '${FormatUtil.getDollarSign()}state', '${FormatUtil.getDollarSign()}modal', '${modelName}Service', ${modelName}SelectionController]);
})();